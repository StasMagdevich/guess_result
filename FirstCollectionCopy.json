{
	"info": {
		"_postman_id": "7ba79e3f-0ac0-4800-8805-68695611d517",
		"name": "First Collection Copy",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "26715865"
	},
	"item": [
		{
			"name": "DZ15.1",
			"item": [
				{
					"name": "Signup",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"let mail = pm.variables.replaceIn(\"{{$randomEmail}}\");",
									"pm.collectionVariables.set(\"random_mail\", mail);",
									"",
									"let password = pm.variables.replaceIn(\"{{$randomPassword}}\");",
									"pm.collectionVariables.set(\"password\", password);",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"let response = pm.response.json();",
									"pm.collectionVariables.set(\"userId\", response.data.userId);",
									"",
									"pm.test(\"valid email\", function () {",
									"    pm.expect(JSON.parse(pm.request.body.raw).email)",
									"        .to.match(/[a-zA-Z._0-9]+@(gmail\\.com|yahoo\\.com)/);",
									"});",
									"",
									"var chema = {",
									"    \"$schema\": \"http://json-schema.org/draft-04/schema#\",",
									"    \"type\": \"object\",",
									"    \"properties\": {",
									"        \"status\": {",
									"            \"type\": \"string\"",
									"        },",
									"        \"data\": {",
									"            \"type\": \"object\",",
									"            \"properties\": {",
									"                \"userId\": {",
									"                    \"type\": \"integer\"",
									"                },",
									"                \"photoFilename\": {",
									"                    \"type\": \"string\"",
									"                },",
									"                \"distanceUnits\": {",
									"                    \"type\": \"string\"",
									"                },",
									"                \"currency\": {",
									"                    \"type\": \"string\"",
									"                }",
									"            },",
									"            \"required\": [",
									"                \"userId\",",
									"                \"photoFilename\",",
									"                \"distanceUnits\",",
									"                \"currency\"",
									"            ]",
									"        }",
									"    },",
									"    \"required\": [",
									"        \"status\",",
									"        \"data\"",
									"    ]",
									"}",
									"",
									"pm.test('valid chema', function () {",
									"    pm.expect(tv4.validate(pm.response.json(), chema)).to.be.true;",
									"});",
									"",
									"",
									"var schema = {",
									"    \"items\": {",
									"        \"type\": \"boolean\"",
									"    }",
									"};",
									"",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "POST",
						"header": [
							{
								"key": "accept",
								"value": "application/json"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"{{name}}\",\n  \"lastName\": \"{{$randomLastName}}\",\n  \"email\": \"{{random_mail}}\",\n  \"password\": \"{{password}}\",\n  \"repeatPassword\": \"{{password}}\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{myUrl}}/auth/signup",
							"host": [
								"{{myUrl}}"
							],
							"path": [
								"auth",
								"signup"
							]
						},
						"description": "Generated from cURL: curl -X 'POST' \\\n  'https://qauto2.forstudy.space/api/auth/signup' \\\n  -H 'accept: application/json' \\\n  -H 'Content-Type: application/json' \\\n  -d '{\n  \"name\": \"John\",\n  \"lastName\": \"Dou\",\n  \"email\": \"test@test.com\",\n  \"password\": \"Qwerty12345\",\n  \"repeatPassword\": \"Qwerty12345\"\n}'"
					},
					"response": []
				},
				{
					"name": "Edit Uzer Profile",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"let response = pm.response.json();",
									"",
									"let dateBirth = pm.collectionVariables.get(\"date_of_bearth\").trim();",
									"let responseYear = new Date(dateBirth).getFullYear();",
									"let sentYear = new Date(dateBirth).getFullYear();",
									"",
									"pm.test(\"Year of birth matches\", function () {",
									"    pm.expect(responseYear).to.eql(sentYear);",
									"});",
									"",
									"//let photo = pm.collectionVariables.get(\"random_image\");",
									"let name = pm.collectionVariables.get(\"name\");",
									"let lastName = pm.collectionVariables.get(\"lastName\");",
									"let country = pm.collectionVariables.get(\"random_country\");",
									"",
									"pm.test(\"Response matches the sent data\", function () {",
									"    pm.expect(response.data.name).to.eql(name);",
									"    pm.expect(response.data.lastName).to.eql(lastName);",
									"    pm.expect(response.data.country).to.eql(country);",
									"});",
									"",
									"",
									"",
									"",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"//pm.collectionVariables.set(\"name\", pm.variables.replaceIn(\"{{$randomFirstName}}\"));",
									"pm.collectionVariables.set(\"lastName\", pm.variables.replaceIn(\"{{$randomLastName}}\"));",
									"",
									"let randomDate = new Date(pm.variables.replaceIn(\"{{$randomDatePast}}\"));",
									"let isoDate = randomDate.toISOString(); ",
									"pm.collectionVariables.set(\"date_of_bearth\", isoDate);",
									"",
									"let random_image = pm.variables.replaceIn(\"{{$randomAbstractImage}}\");",
									"pm.collectionVariables.set(\"random_image\",random_image);",
									"",
									"let random_country = pm.variables.replaceIn(\"{{$randomCountry}}\");",
									"pm.collectionVariables.set(\"random_country\",random_country);",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "PUT",
						"header": [
							{
								"key": "accept",
								"value": "application/json"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"photo\": \"{{random_image}}\",\n    \"name\": \"{{name}}\",\n    \"lastName\": \"{{lastName}}\",\n    \"dateBirth\": \"{{date_of_bearth}}\",\n    \"country\": \"{{random_country}}\"\n}\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{myUrl}}/users/profile",
							"host": [
								"{{myUrl}}"
							],
							"path": [
								"users",
								"profile"
							]
						},
						"description": "Generated from cURL: curl -X 'PUT' \\\n  'https://qauto2.forstudy.space/api/users/profile' \\\n  -H 'accept: application/json' \\\n  -H 'Content-Type: application/json' \\\n  -d '{\n  \"photo\": \"user-1621352948859.jpg\",\n  \"name\": \"John\",\n  \"lastName\": \"Dou\",\n  \"dateBirth\": \"2021-03-17T15:21:05.000Z\",\n  \"country\": \"Ukraine\"\n}'"
					},
					"response": []
				}
			],
			"auth": {
				"type": "noauth"
			},
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"type": "text/javascript",
						"packages": {},
						"exec": [
							""
						]
					}
				},
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"packages": {},
						"exec": [
							""
						]
					}
				}
			]
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"packages": {},
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"packages": {},
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"key": "myUrl",
			"value": "https://qauto2.forstudy.space/api"
		},
		{
			"key": "milage",
			"value": ""
		},
		{
			"key": "car_id",
			"value": ""
		},
		{
			"key": "initialMileage",
			"value": ""
		},
		{
			"key": "carMileage",
			"value": ""
		},
		{
			"key": "name",
			"value": ""
		},
		{
			"key": "new_password",
			"value": ""
		},
		{
			"key": "i",
			"value": ""
		},
		{
			"key": "names",
			"value": ""
		},
		{
			"key": "randomCityIds",
			"value": ""
		},
		{
			"key": "averageSquare",
			"value": ""
		},
		{
			"key": "random_mail",
			"value": ""
		},
		{
			"key": "password",
			"value": ""
		},
		{
			"key": "userId",
			"value": ""
		},
		{
			"key": "lastName",
			"value": ""
		},
		{
			"key": "date_of_bearth",
			"value": ""
		},
		{
			"key": "random_image",
			"value": ""
		},
		{
			"key": "random_country",
			"value": ""
		}
	]
}